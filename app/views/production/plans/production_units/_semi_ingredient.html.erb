<% unit = semi_ingredient.semi_product.measurement.unit %>
<% required_count, available_count, satisfied = semi_ingredient.calculate_availability_for @production_unit %>
<% produced_count = semi_ingredient.ratio * @production_unit.produced_tonnage %>

<tr>
  <td class="sm:w-2/5 whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-0">
    <%= semi_ingredient.semi_product.name %>
  </td>
  <td class="sm:w-1/5 whitespace-nowrap px-3 py-4 text-sm text-gray-500">
    <%= t("forms.measurement", value: number_with_delimiter(required_count), unit: unit) %>
  </td>
  <td class="sm:w-1/5 whitespace-nowrap px-3 py-4 text-sm text-gray-500">
    <%= t("forms.measurement", value: number_with_delimiter(produced_count), unit: unit) %>
  </td>
  <td class="sm:w-1/5 whitespace-nowrap px-3 py-4 text-sm text-gray-500 <%= "text-red-600 font-semibold" unless satisfied %>">
    <%= t("forms.measurement", value: number_with_delimiter(available_count), unit: unit) %>
  </td>
</tr>