<tr class="divide-x divide-gray-200 bg-gray-50" data-controller="cascade" data-cascade-open-value="true" data-cascade-id-value="<%= group.id %>" data-cascade-rotation-class="rotate-180">
  <td class="whitespace-nowrap py-4 pl-4 pr-3 text-xs uppercase font-medium text-gray-500">
    <button type="button" data-action="cascade#toggle" class="flex w-full items-center justify-start space-x-1">
      <span class="text-xs font-semibold leading-6"><%= group.name %></span>
      <span class="flex h-6 items-center"><%= inline_svg_tag "chevron-down.svg", class: "size-4", data: { cascade_target: "opener" } %></span>
    </button>
  </td>
  <% @channels.each do |channel| %>
    <!--CHANNEL-->
    <!--PLAN-->
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_with_delimiter @data[:groups][group.id][:channels][channel.id][:plan_count] %>
    </td>
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_to_currency @data[:groups][group.id][:channels][channel.id][:plan_price] %>
    </td>
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_with_delimiter @data[:groups][group.id][:channels][channel.id][:plan_tonnage] %>
    </td>
    <!--FACT-->
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_with_delimiter @data[:groups][group.id][:channels][channel.id][:fact_count] %>
    </td>
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_to_currency @data[:groups][group.id][:channels][channel.id][:fact_price] %>
    </td>
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_with_delimiter @data[:groups][group.id][:channels][channel.id][:fact_tonnage] %>
    </td>
    <!--DELTA-->
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_with_delimiter @data[:groups][group.id][:channels][channel.id][:deviation_absolute] %>
    </td>
    <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
      <%= number_to_percentage @data[:groups][group.id][:channels][channel.id][:deviation_percent] %>
    </td>
  <% end %>
  <!--SUMMARY-->
  <!--PLAN-->
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_with_delimiter @data[:groups][group.id][:summary][:plan_count] %>
  </td>
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_to_currency @data[:groups][group.id][:summary][:plan_price] %>
  </td>
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_with_delimiter @data[:groups][group.id][:summary][:plan_tonnage] %>
  </td>
  <!--FACT-->
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_with_delimiter @data[:groups][group.id][:summary][:fact_count] %>
  </td>
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_to_currency @data[:groups][group.id][:summary][:fact_price] %>
  </td>
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_with_delimiter @data[:groups][group.id][:summary][:fact_tonnage] %>
  </td>
  <!--DELTA-->
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_with_delimiter @data[:groups][group.id][:summary][:deviation_absolute] %>
  </td>
  <td class="whitespace-nowrap px-3 py-4 font-bold text-xs text-gray-500 text-right">
    <%= number_to_percentage @data[:groups][group.id][:summary][:deviation_percent] %>
  </td>
</tr>
<%= render partial: "product", collection: @products.filter_by_group(group.id), as: :product %>